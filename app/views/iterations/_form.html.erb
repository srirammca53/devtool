<html>

<% @flag = 0 %>

<p> New Iteration for <b><%= @project.name %></b> </p>
<table border="1" >
<tr>
<%= form_for([@project, @project.iteration.build]) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    
    <%= f.select(:iterationtype, options_for_select(["Weekly", "Monthly", "BIO-Monthly"])) %>
  </div>
  <div class="field">
    <%= f.label :Start_date %><br />
    <%= f.text_field :start_date, :id => :popupDatepicker , :onmouseout=> "myFunction()"%>
  </div>
  <div class="field">
    <%= f.label :End_date %><br />
    <%#= f.date_select :end_date %>
    <%= f.text_field :end_date, :id => :popupDatepicker1 %>
  </div>
   <div class="field">
    <%= f.label :Status %><br />
 <%= f.select(:status, options_for_select(["Planned","Open"])) %>


  </div>
  <div class="field">
    <%= f.label :Description %><br />
    <%= f.text_area :description %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
</tr>
 </table>

</html>
<script>
$("#popupDatepicker").glDatePicker(
{
onChange: function(target, newDate)
{
target.val
(
newDate.getFullYear() + "-" +
(newDate.getMonth() + 1) + "-" +
newDate.getDate()
);
}
});
$("#popupDatepicker1").glDatePicker(
{
onChange: function(target, newDate)
{
target.val
(
newDate.getFullYear() + "-" +
(newDate.getMonth() + 1) + "-" +
newDate.getDate()
);
}
});
</script>
<script>
 function myFunction()
 {
var current_ele = $("#iteration_iterationtype").val();
if(current_ele == "Weekly")
{	
var st_date = $("#popupDatepicker").val();
var date1 = Date.parse(st_date);
date1.setDate(date1.getDate() + 7);
var testda = date1.toString("yyyy-MM-dd");
$("#popupDatepicker1").val(testda);
}else
if(current_ele == "Monthly")
{
var st_date = $("#popupDatepicker").val();
var date1 = Date.parse(st_date);
date1.setDate(date1.getDate() + 30);
var testda = date1.toString("yyyy-MM-dd");
$("#popupDatepicker1").val(testda);
}
else
{
var st_date = $("#popupDatepicker").val();
var date1 = Date.parse(st_date);
date1.setDate(date1.getDate() + 15);
var testda = date1.toString("yyyy-MM-dd");
$("#popupDatepicker1").val(testda);
}
 }
</script>
